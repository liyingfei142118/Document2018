IOY0	EQU	0E000H
Y7		EQU	IOY0+38H

DATA	SEGMENT
	NUM	DB	01H
DATA	ENDS

STACK1	SEGMENT STACK
		DW	256 DUP(?)
STACK1	ENDS

CODE	SEGMENT
		ASSUME CS:CODE, DS:DATA, SS:STACK1
START:	MOV	AX, DATA
		MOV	DS, AX
		
		MOV	DX, Y7
		IN	AL, DX
		OUT	DX, AL
		
		MOV	DL, 0FFH
		MOV	AH, 6
		INT	21H
		JZ	START
		
L1:		MOV	DX, Y7
		IN	AL, DX
		CMP AL, 1
		JNE L1
		
L2:		MOV	DX, Y7
		MOV	AL, NUM
		OUT	DX, AL
		ROL	AL, 1
		MOV NUM, AL
		CALL DELAY
		
		MOV	DL, 0FFH
		MOV	AH, 6
		INT	21H
		
		JZ	L2
		
L3:		MOV	DX, Y7
		IN	AL, DX
		CMP AL, 2
		JNE L3

		MOV NUM, 55H
L4:		MOV	DX, Y7
		MOV	AL, NUM
		OUT	DX, AL
		NOT	AL 
		MOV	NUM, AL
		CALL DELAY
		
		MOV	DL, 0FFH
		MOV	AH, 6
		INT	21H
		JZ	L4
		
		MOV	AX, 4C00H
		INT	21H
		
DELAY	PROC
		MOV	BX, 8FFH
DELAY1:	MOV	CX, 0FFFFH
		LOOP $
		DEC	BX
		JNZ	DELAY1
		RET
DELAY	ENDP
		
CODE	ENDS
END		START
 
