IOY0 EQU 0E000H ;片选IOY0对应的端口始地址
Y7 EQU IOY0+38H ;译码电路输出Y7对应的端口地址
DATA SEGMENT
NUM DB 01H
DATA ENDS
STACK1 SEGMENT STACK
DW 256 DUP(?)
STACK1 ENDS
CODE SEGMENT
ASSUME CS:CODE,DS:DATA,SS:STACK1
START: MOV AX, DATA
MOV DS, AX
MOV DX,Y7 ;读入开关量
IN AL, DX 
OUT DX,AL
MOV DL,0FFH 
MOV AH, 6 ;判断是否有按键按下
INT 21H
JZ START ;无按键继续循环，有则退出
L1: MOV DX,Y7
IN AL,DX ;读入开关量, 判断是否为1
 CMP AL,1
JNE L1
L2: MOV DX,Y7
MOV AL,NUM
OUT DX,AL ;八位LED从右向左依次循点亮
ROL AL,1 
MOV NUM,AL
CALL DELAY
MOV DL,0FFH
MOV AH, 6 ;判断是否有按键按下
INT 21H
JZ L2 ;无按键继续循环，有则退出
L3: MOV DX,Y7
IN AL,DX ; 读入开关量, 判断是否为2
CMP AL,2
JNE L3
 MOV NUM,55H
L4: MOV DX,Y7
MOV AL,NUM
OUT DX,AL ;八位LED交替亮
NOT AL
MOV NUM,AL
CALL DELAY
MOV DL,0FFH
MOV AH, 6 ;判断是否有按键按下
INT 21H
JZ L4 ;无按键继续循环，有则退出
MOV AX, 4C00H ;结束程序退出
INT 21H
DELAY PROC
MOV BX,8FFH
DELAY1:MOV CX,0FFFFH
LOOP $ ;延时子程序
DEC BX
JNZ DELAY1
RET
DELAY ENDP
CODE ENDS
END START
