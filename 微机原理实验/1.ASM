STACK1 SEGMENT STACK
DW 256 DUP(?)
STACK1 ENDS
DATA SEGMENT
MES1 DB 'The data in buf2 are:',0AH,0DH,'$'
BUF1 DB 11H,22H,33H,44H,55H,66H,77H,88H,99H,0AAH,0BBH,0CCH,0DDH,0EEH,0FFH,00H
BUF2 DB 20H DUP(0)
DATA ENDS
CODE SEGMENT
ASSUME CS:CODE,DS:DATA
START: MOV AX,DATA
MOV DS,AX
MOV SI,OFFSET BUF1
MOV DI,OFFSET BUF2


MOV CX ,0010H
CMP SI,DI
JA TOP2
ADD SI,CX
ADD DI,CX
DEC SI
DEC DI

TOP1: MOV AL,[SI]
   MOV [DI],AL
   DEC SI
   DEC DI
   JNE TOP1
   JMP TOP3
TOP2: MOV AL,[SI]
    MOV [DI],AL
    INC SI
    INC DI
    DEC CX
    JNE TOP2
    
TOP3: MOV DX ,OFFSET MES1
    MOV AH,09H
    INT 21H
    MOV CX,10H
    MOV SI,OFFSET BUF2
TOP4:  CALL SH
    INC SI 
     MOV DL,20H
    MOV AH,02H
    INT 21H
LOOP TOP4
 
 WAIT1:MOV AH,1
 INT 16H
 JZ WAIT1
    MOV AX,4C00H
    INT 21H
SH PROC NEAR
     MOV AL,DS:[SI]
     AND AL,0F0H
     SHR AL,4
     CMP AL,0AH
     JB C2
     ADD AL,07H
C2: ADD AL,30H
    MOV DL,AL
    MOV AH,02H
    INT 21H
    MOV AL,DS:[SI]
    AND AL,0FH
    CMP AL,0AH
    JB C3
    ADD AL,07H
C3 :ADD AL,30H
   MOV DL,AL
   MOV AH,02H
   INT 21H
   
RET
ENDP
CODE ENDS
    END START

